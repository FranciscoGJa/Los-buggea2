<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.cell.PropertyValueFactory?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.Region?>

<BorderPane xmlns="http://javafx.com/javafx/17.0.12" 
            xmlns:fx="http://javafx.com/fxml/1"
            prefHeight="600.0" prefWidth="800.0">
   
   <center>
      <VBox spacing="20.0" style="-fx-padding: 20;">
         <Label text="BÃºsqueda de Perfiles de Citas" style="-fx-font-size: 24; -fx-font-weight: bold;" />
         
         <VBox spacing="10.0">
            <Label text="Criterios de BÃºsqueda:" style="-fx-font-size: 16; -fx-font-weight: bold;" />
            
            <HBox spacing="15.0">
               <VBox spacing="5.0">
                  <Label text="Nombre:" />
                  <TextField fx:id="txtNombre" prefWidth="250.0" />
               </VBox>
               
               <VBox spacing="5.0">
                  <Label text="TelÃ©fono:" />
                  <TextField fx:id="txtTelefono" prefWidth="200.0" />
               </VBox>
            </HBox>
            
            <!-- BOTONES ACTUALIZADOS -->
            <HBox spacing="10.0" alignment="CENTER_LEFT">
               <Button text="ðŸ” Buscar" onAction="#buscarPerfiles" 
                       style="-fx-background-color: #2ecc71; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 15;" />
               <Button text="ðŸ”„ Limpiar" onAction="#limpiarCampos" 
                       style="-fx-background-color: #95a5a6; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 15;" />
               <Button text="âž• Nuevo Perfil" onAction="#crearNuevoPerfil" 
                       style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 15;" />
               <!-- NUEVO BOTÃ“N PARA HISTORIAL -->
               <Button text="ðŸ“‹ Ver Historial" onAction="#verHistorialCitas" 
                       style="-fx-background-color: #9b59b6; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 15;" />
               <Region HBox.hgrow="ALWAYS" />
            </HBox>
         </VBox>
         
         <VBox spacing="10.0" VBox.vgrow="ALWAYS">
            <Label text="Resultados:" style="-fx-font-size: 16; -fx-font-weight: bold;" />
            
            <TableView fx:id="tablaResultados" VBox.vgrow="ALWAYS">
               <columns>
                  <TableColumn fx:id="colNombre" prefWidth="150.0" text="Nombre">
                     <cellValueFactory>
                        <PropertyValueFactory property="nombreCompleto" />
                     </cellValueFactory>
                  </TableColumn>
                  <TableColumn fx:id="colEdad" prefWidth="80.0" text="Edad">
                     <cellValueFactory>
                        <PropertyValueFactory property="edad" />
                     </cellValueFactory>
                  </TableColumn>
                  <TableColumn fx:id="colSexo" prefWidth="100.0" text="Sexo">
                     <cellValueFactory>
                        <PropertyValueFactory property="sexo" />
                     </cellValueFactory>
                  </TableColumn>
                  <TableColumn fx:id="colDireccion" prefWidth="200.0" text="DirecciÃ³n">
                     <cellValueFactory>
                        <PropertyValueFactory property="direccion" />
                     </cellValueFactory>
                  </TableColumn>
                  <TableColumn fx:id="colOcupacion" prefWidth="150.0" text="OcupaciÃ³n">
                     <cellValueFactory>
                        <PropertyValueFactory property="ocupacion" />
                     </cellValueFactory>
                  </TableColumn>
                  <TableColumn fx:id="colTelefono" prefWidth="120.0" text="TelÃ©fono">
                     <cellValueFactory>
                        <PropertyValueFactory property="telefono" />
                     </cellValueFactory>
                  </TableColumn>
               </columns>
            </TableView>
            
            <!-- INFORMACIÃ“N DE SELECCIÃ“N -->
            <HBox spacing="10" alignment="CENTER" style="-fx-padding: 10; -fx-background-color: #f8f9fa; -fx-border-color: #dee2e6;">
               <Label text="ðŸ’¡ Seleccione un perfil y haga clic en 'Ver Historial' para consultar sus citas" 
                      style="-fx-text-fill: #6c757d; -fx-font-style: italic; -fx-font-size: 12;" />
            </HBox>
         </VBox>
      </VBox>
   </center>
</BorderPane>